# –ü—Ä–æ—Ç–æ—Ç–∏–ø Shopify –ü–ª–∞–≥–∏–Ω–∞: NMI + 3D Secure

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è**

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **Angular-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∫–∞–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø (Proof of Concept) –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞ **NMI** –≤ **Shopify Checkout**.

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª—É–∂–∏—Ç –¥–≤—É–º —Ü–µ–ª—è–º:
1.  **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è UX:** –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Hosted Fields) –∏ —Å—Ü–µ–Ω–∞—Ä–∏–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ 3D Secure (Redirect Flow).
2.  **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ñ–∏–≤–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏, –ø–ª–∞–Ω–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞.

üîó **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è:** [–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ StackBlitz](https://stackblitz.com/~/github.com/yladzislay/nmi-3ds-shopify-plugin-prototype)

---

## üöÄ –û—Å–Ω–æ–≤–Ω–æ–π –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### 1. –°–∏–º—É–ª—è—Ç–æ—Ä –ß–µ–∫–∞—É—Ç–∞ (Checkout Extension)
*   –≠–º—É–ª—è—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Shopify Checkout.
*   –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç (Luhn algorithm simulation).
*   –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–µ–π (Hosted Fields).
*   **–°—Ü–µ–Ω–∞—Ä–∏–∏:**
    *   ‚úÖ **Happy Path:** –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫.
    *   üõ°Ô∏è **3DS Challenge:** –≠–º—É–ª—è—Ü–∏—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ —Å–∞–π—Ç –±–∞–Ω–∫–∞ (ACS) –∏ –≤–≤–æ–¥ SMS-–∫–æ–¥–∞.
    *   ‚ùå **Decline:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤).

### 2. –°–∏–º—É–ª—è—Ç–æ—Ä –ê–¥–º–∏–Ω–∫–∏ (Merchant View)
*   –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –≤ —Ä–µ–∂–∏–º "–í–ª–∞–¥–µ–ª—å—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞".
*   –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞ Shopify Order.
*   –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: `Auth Code`, `AVS Result`, `3DS Liability Shift`.

### 3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
*   –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π "One-Pager" —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
*   –ü–æ—à–∞–≥–æ–≤—ã–π Roadmap —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (8 —ç—Ç–∞–ø–æ–≤).
*   –°—Ö–µ–º—ã –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (Client <-> Server <-> NMI).
*   –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ Backend (Remix/Node.js).

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫ –ü—Ä–æ—Ç–æ—Ç–∏–ø–∞

*   **Framework:** Angular v18+ (Zoneless Change Detection).
*   **Styling:** Tailwind CSS (–∫–æ–ø–∏—è –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã Shopify Polaris).
*   **State Management:** Angular Signals.
*   **Architecture:** Standalone Components.

---

## üó∫ –ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Roadmap)

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞:
1.  –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä–∫–∞—Å–∞ (Shopify CLI).
2.  –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è NMI API (Auth/Capture).
3.  3DS Frictionless Flow.
4.  3DS Challenge Flow.
5.  –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (DB).
6.  –ê–¥–º–∏–Ω–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
7.  Webhooks.
8.  E2E –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

*–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π –≤ Shopify Development.*