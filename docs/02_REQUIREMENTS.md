# Спецификация Требований (SRS)

## 1. Функциональные Требования (FR)

### FR-01: Инициация Платежа
*   Система должна предоставлять форму ввода карточных данных внутри Shopify Checkout.
*   Данные карты не должны сохраняться на серверах приложения (PCI DSS Scope reduction).

### FR-02: Интеграция с NMI
*   Приложение должно использовать NMI Gateway API (Direct Post или Collect.js).
*   Поддержка транзакций типа `SALE` и `AUTH`.

### FR-03: Обработка 3D Secure
*   Приложение должно распознавать ответ NMI, требующий проверки 3DS (Soft Decline / Challenge Required).
*   Приложение должно перенаправлять покупателя на URL банка (ACS) для ввода кода.
*   После проверки приложение должно корректно завершать транзакцию в Shopify.

### FR-04: Обработка Ошибок
*   Пользователь должен видеть понятные сообщения об ошибках (например, "Недостаточно средств", "Неверный CVV").

## 2. Нефункциональные Требования (NFR)

### NFR-01: Безопасность
*   Использование HTTPS для всех соединений.
*   Валидация всех входных данных на стороне сервера.

### NFR-02: Производительность
*   Время отклика на инициацию платежа не более 2 секунд (без учета времени 3DS).
*   Интерфейс должен быть отзывчивым (отсутствие блокировок UI).

### NFR-03: Стек Технологий
*   **Frontend:** Shopify Checkout Extensions (React/Vanilla JS) - *в прототипе Angular*.
*   **Backend:** Node.js / Serverless Functions.
*   **API:** Shopify Payments Apps API.